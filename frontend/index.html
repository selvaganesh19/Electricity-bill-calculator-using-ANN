<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Electricity Bill Calculator - TNEB Tariff</title>
  <meta name="description" content="Calculate your monthly electricity consumption with TNEB tariff rates." />
  <meta name="theme-color" content="#7c3aed" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />

  <!-- avoid favicon 404 -->
  <link rel="icon" href="data:," />

  <!-- PWA manifest -->
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --primary: #7c3aed; --primary-light: #a855f7; --blue: #2563eb;
      --green: #059669; --green-dark: #065f46; --orange: #b45309; --red: #dc2626;
      --g50: #f9fafb; --g100: #f3f4f6; --g200: #e5e7eb; --g300: #d1d5db;
      --g400: #9ca3af; --g500: #6b7280; --g700: #374151; --g900: #1f2937;
      --r: 12px; --rl: 16px; --rx: 20px;
    }
    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background: linear-gradient(180deg, #ede4ff 0%, #f5f0ff 25%, #eef8ff 60%, #f0fdf4 100%);
      min-height: 100vh; color: var(--g900); line-height: 1.5;
    }
    .ctr { max-width: 1180px; margin: 0 auto; padding: 28px 16px; }
    @media (min-width: 640px) { .ctr { padding: 36px 24px; } }

    /* HEADER */
    .hdr { text-align: center; margin-bottom: 28px; }
    .hdr h1 {
      font-size: clamp(1.6rem, 5vw, 2.8rem); font-weight: 900;
      background: linear-gradient(135deg, #7c3aed 0%, #a855f7 40%, #2563eb 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text; letter-spacing: -0.025em;
    }
    .hdr .sub { margin-top: 10px; color: var(--g500); font-size: 1rem; }
    .badges { margin-top: 14px; display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; }
    .bdg {
      display: inline-flex; align-items: center; padding: 4px 14px; border-radius: 999px;
      font-size: 0.75rem; font-weight: 600; border: 1.5px solid transparent;
    }
    .bdg-g { background: #dcfce7; color: #15803d; } .bdg-b { background: #eff6ff; color: #2563eb; border-color: #93c5fd; }
    .bdg-p { background: #f5f0ff; color: #7c3aed; border-color: #c4b5fd; }
    .bdg-sm { font-size: 0.7rem; padding: 2px 10px; background: transparent; border-color: var(--g200); color: var(--g500); }

    /* TABS */
    .tabs {
      display: grid; grid-template-columns: repeat(4, 1fr);
      background: #fff; border-radius: var(--rl); padding: 5px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06); margin-bottom: 24px;
    }
    .tbtn {
      display: flex; align-items: center; justify-content: center; gap: 6px;
      padding: 10px 4px; border: none; border-radius: var(--r);
      background: transparent; color: var(--g500); cursor: pointer;
      font-size: 0.85rem; font-weight: 500; transition: all .2s; font-family: inherit;
    }
    .tbtn:hover { background: #f5f0ff; color: var(--primary); }
    .tbtn.on { background: #f5f0ff; color: var(--primary); box-shadow: 0 1px 4px rgba(124,58,237,.12); font-weight: 600; }
    .tbtn svg { width: 18px; height: 18px; flex-shrink: 0; }
    .tbtn .tl { display: none; }
    @media (min-width: 480px) { .tbtn .tl { display: inline; } }
    .pan { display: none; } .pan.on { display: block; }

    /* CARDS */
    .cd {
      background: #fff; border: 1px solid var(--g200); border-radius: var(--rx);
      padding: 24px; margin-bottom: 20px; transition: box-shadow .2s;
    }
    .cd:hover { box-shadow: 0 4px 20px rgba(0,0,0,.04); }
    .cd-g { border-color: #a7f3d0; background: linear-gradient(135deg, #ecfdf5 0%, #f0fdf9 100%); }
    .cd-b { border-color: #bfdbfe; background: linear-gradient(135deg, #eff6ff 0%, #fafcff 100%); }
    .cd-p { border-color: #ddd6fe; background: linear-gradient(135deg, #f5f0ff 0%, #faf8ff 100%); }
    .cd-y { border-color: #fde68a; background: linear-gradient(135deg, #fffbeb 0%, #fffef7 100%); }
    .cd-r { border-color: #fca5a5; background: linear-gradient(135deg, #fef2f2 0%, #fff 100%); }
    .cd h3 { font-size: 1.1rem; font-weight: 700; } .cd .ds { margin-top: 4px; font-size: 0.85rem; color: var(--g500); }

    /* GRIDS */
    .g2 { display: grid; gap: 20px; } @media (min-width: 768px) { .g2 { grid-template-columns: 1fr 1fr; } }
    .g4 { display: grid; gap: 14px; grid-template-columns: 1fr 1fr; } @media (min-width: 1024px) { .g4 { grid-template-columns: repeat(4, 1fr); } }
    .gh { display: grid; gap: 10px; grid-template-columns: repeat(2, 1fr); }
    @media (min-width: 640px) { .gh { grid-template-columns: repeat(3, 1fr); } }
    @media (min-width: 1024px) { .gh { grid-template-columns: repeat(6, 1fr); } }
    .s2 { grid-column: 1 / -1; }

    /* HOUSE BUTTONS */
    .hb {
      border: 2px solid var(--g200); background: #fff; border-radius: var(--r);
      padding: 14px 8px; text-align: center; cursor: pointer; transition: all .2s; font-family: inherit;
    }
    .hb:hover { border-color: rgba(124,58,237,.4); background: #faf5ff; transform: translateY(-1px); }
    .hb.on { border-color: var(--primary); background: linear-gradient(135deg, #7c3aed, #a855f7); color: #fff; box-shadow: 0 4px 18px rgba(124,58,237,.25); transform: translateY(-1px); }
    .hb .hn { font-size: 0.85rem; font-weight: 700; } .hb .hi { font-size: 0.7rem; margin-top: 2px; color: var(--g400); }
    .hb.on .hi { color: #e0d4f5; }
    .hb .he { font-size: 1.4rem; margin-bottom: 4px; }

    /* FORM */
    .fr { display: flex; flex-wrap: wrap; gap: 14px; margin-top: 18px; align-items: flex-end; }
    .fg { flex: 1; min-width: 150px; } .fg.sm { flex: 0 0 auto; width: 90px; min-width: 90px; }
    .fg label { display: block; margin-bottom: 5px; font-size: 0.82rem; font-weight: 600; color: var(--g700); }
    select, input[type="number"] {
      width: 100%; padding: 9px 12px; border: 1.5px solid var(--g300); border-radius: 10px;
      font-size: 0.85rem; font-family: inherit; background: #fff; color: var(--g700);
      transition: all .2s; appearance: auto;
    }
    select:focus, input[type="number"]:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(124,58,237,.1); }
    select:disabled { background: var(--g100); color: var(--g400); cursor: not-allowed; }

    /* BUTTONS */
    .btn {
      display: inline-flex; align-items: center; justify-content: center; gap: 6px;
      padding: 10px 24px; border: none; border-radius: 10px;
      font-size: 0.85rem; font-weight: 600; cursor: pointer; font-family: inherit;
      transition: all .2s; white-space: nowrap;
    }
    .btn-g { background: linear-gradient(135deg, #059669, #10b981); color: #fff; box-shadow: 0 2px 8px rgba(5,150,105,.2); }
    .btn-g:hover { box-shadow: 0 4px 14px rgba(5,150,105,.3); transform: translateY(-1px); }
    .btn-g:disabled { background: var(--g300); box-shadow: none; cursor: not-allowed; transform: none; }
    .btn-r { background: transparent; color: var(--red); padding: 8px; border: none; border-radius: 8px; cursor: pointer; font-family: inherit; }
    .btn-r:hover { background: #fef2f2; }

    /* APPLIANCE LIST */
    .ai {
      display: flex; align-items: center; gap: 14px;
      border: 1px solid var(--g200); border-radius: var(--r); padding: 14px 16px;
      background: linear-gradient(90deg, var(--g50), #fff); transition: all .2s;
    }
    .ai:hover { box-shadow: 0 4px 12px rgba(0,0,0,.05); transform: translateY(-1px); }
    .ai + .ai { margin-top: 10px; }
    .aicon {
      width: 42px; height: 42px; display: flex; align-items: center; justify-content: center;
      background: linear-gradient(135deg, #ecfdf5, #d1fae5); border-radius: 12px; font-size: 1.3rem; flex-shrink: 0;
    }
    .ainfo { flex: 1; min-width: 0; } .ainfo .nm { font-weight: 600; color: var(--g900); font-size: 0.88rem; }
    .ainfo .tp { font-size: 0.72rem; color: var(--g500); }
    .ast { text-align: center; } .ast .v { font-size: 0.85rem; font-weight: 600; color: var(--g700); }
    .ast .l { font-size: 0.66rem; color: var(--g400); text-transform: uppercase; letter-spacing: .3px; }
    .ast.gv .v { color: var(--green); font-weight: 700; }
    @media (max-width: 600px) { .ast.hm { display: none; } }

    /* STAT CARDS */
    .sc { border-radius: var(--rx); padding: 20px; transition: transform .2s; }
    .sc:hover { transform: translateY(-2px); }
    .sc .tp { display: flex; align-items: center; justify-content: space-between; }
    .sc .lb { font-size: 0.82rem; font-weight: 600; } .sc .vl { margin-top: 8px; font-size: 1.4rem; font-weight: 800; color: var(--g900); }
    .sc .sb { margin-top: 2px; font-size: 0.82rem; color: var(--g500); }
    .sc .mc { margin-top: 2px; font-size: 0.72rem; font-weight: 500; }

    /* TABLE */
    .tw { margin-top: 16px; border: 1px solid var(--g200); border-radius: var(--r); overflow: hidden; }
    .tt { width: 100%; border-collapse: collapse; }
    .tt thead tr { background: linear-gradient(90deg, #7c3aed, #a855f7); color: #fff; }
    .tt th { padding: 12px 16px; text-align: left; font-size: 0.82rem; font-weight: 600; }
    .tt th:last-child { text-align: right; }
    .tt td { padding: 11px 16px; font-size: 0.85rem; border-bottom: 1px solid var(--g100); }
    .tt td:last-child { text-align: right; font-weight: 700; }
    .tt tr.hl { background: #ecfdf5; } .tt tr.hl td:last-child { color: var(--green); }
    .tt tr:hover:not(:first-child) { background: #faf5ff; }

    /* BILL TOTAL BARS */
    .btb {
      display: flex; align-items: center; justify-content: space-between;
      padding: 16px 20px; border-radius: var(--r); color: #fff; margin-top: 10px;
    }
    .btb .t { font-size: 0.95rem; font-weight: 600; } .btb .v { font-size: 1.2rem; font-weight: 800; }
    .btb-p { background: linear-gradient(90deg, #7c3aed, #a855f7); box-shadow: 0 4px 15px rgba(124,58,237,.2); }
    .btb-g { background: linear-gradient(90deg, #059669, #10b981); box-shadow: 0 4px 15px rgba(5,150,105,.2); }

    /* PROGRESS BAR */
    .pt { height: 8px; background: var(--g100); border-radius: 999px; overflow: hidden; margin-top: 6px; }
    .pf { height: 100%; border-radius: 999px; background: linear-gradient(90deg, #7c3aed, #a855f7); transition: width .5s ease; }

    /* SLAB ROWS */
    .sr { display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; border: 1px solid var(--g200); border-radius: 10px; background: #fff; }
    .sr + .sr { margin-top: 8px; }
    .sr .sn { font-size: 0.85rem; font-weight: 500; color: var(--g700); } .sr .sd { font-size: 0.72rem; color: var(--g400); margin-left: 8px; }
    .sr .sa { font-size: 0.85rem; font-weight: 700; } .sr .sa.fr { color: var(--green); }

    /* ALERTS */
    .alt { display: flex; gap: 14px; padding: 16px; border-radius: var(--r); border: 1.5px solid; }
    .alt + .alt { margin-top: 12px; }
    .alt-i { flex-shrink: 0; margin-top: 2px; font-size: 1.2rem; }
    .alt-t { font-weight: 700; font-size: 0.9rem; } .alt-m { font-size: 0.85rem; color: var(--g500); margin-top: 4px; line-height: 1.5; }
    .alt-d { border-color: #fca5a5; background: linear-gradient(135deg, #fef2f2, #fff); } .alt-d .alt-i, .alt-d .alt-t { color: #991b1b; }
    .alt-w { border-color: #fde68a; background: linear-gradient(135deg, #fffbeb, #fff); } .alt-w .alt-i, .alt-w .alt-t { color: #92400e; }
    .alt-s { border-color: #a7f3d0; background: linear-gradient(135deg, #ecfdf5, #fff); } .alt-s .alt-i, .alt-s .alt-t { color: #065f46; }
    .alt-inf { border-color: #bfdbfe; background: linear-gradient(135deg, #eff6ff, #fff); } .alt-inf .alt-i, .alt-inf .alt-t { color: #1e3a5f; }

    /* QUICK STATS */
    .qg { display: grid; gap: 14px; grid-template-columns: repeat(3, 1fr); margin-top: 16px; }
    @media (max-width: 640px) { .qg { grid-template-columns: 1fr; } }
    .qb { background: #fff; padding: 18px; border-radius: var(--r); box-shadow: 0 2px 8px rgba(0,0,0,.04); border: 1px solid var(--g100); }
    .qb .ql { font-size: 0.72rem; font-weight: 600; color: var(--g500); text-transform: uppercase; letter-spacing: .5px; }
    .qb .qv { font-size: 1.3rem; font-weight: 800; margin-top: 6px; color: var(--g900); }

    /* TIPS */
    .tg { display: grid; gap: 20px; margin-top: 20px; } @media (min-width: 768px) { .tg { grid-template-columns: 1fr 1fr; } }
    .ts .st { display: flex; align-items: center; gap: 8px; font-weight: 700; color: #1e3a5f; margin-bottom: 10px; font-size: 0.92rem; }
    .ti { display: flex; align-items: flex-start; gap: 10px; padding: 10px 14px; border: 1px solid var(--g200); border-radius: 10px; background: #fff; transition: all .2s; }
    .ti:hover { border-color: #a7f3d0; background: #f0fdf4; }
    .ti + .ti { margin-top: 6px; }
    .td { width: 8px; height: 8px; border-radius: 50%; background: linear-gradient(135deg, #10b981, #34d399); flex-shrink: 0; margin-top: 6px; }
    .tx { font-size: 0.85rem; color: var(--g700); }

    /* SETTINGS */
    .sl { font-size: 0.85rem; font-weight: 700; margin-bottom: 8px; display: block; }
    .sh { font-size: 0.72rem; color: var(--g400); margin-top: 5px; line-height: 1.4; }
    .ib { margin-top: 14px; padding: 14px; border-radius: 10px; background: linear-gradient(135deg, #eff6ff, #f0f9ff); border: 1px solid #bfdbfe; }
    .ib p { font-size: 0.85rem; color: #1e40af; font-weight: 500; } .ib .sm { font-size: 0.75rem; color: #3b82f6; margin-top: 4px; font-weight: 400; }
    .gy { display: flex; flex-direction: column; gap: 22px; }

    /* FOOTER */
    .ft { margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--g200); text-align: center; }
    .ft p { font-size: 0.72rem; color: var(--g400); margin-top: 3px; }

    /* ANIMATIONS */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    .pan.on { animation: fadeIn .3s ease; }
    @keyframes pulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    .pulse { animation: pulse .6s ease; }

    /* Empty state */
    .empty { text-align: center; padding: 40px 20px; }
    .empty .ei { font-size: 3rem; margin-bottom: 12px; opacity: .6; }
    .empty .et { font-size: 1rem; font-weight: 600; color: var(--g700); }
    .empty .em { font-size: 0.85rem; color: var(--g400); margin-top: 6px; }
  </style>
</head>
<body>
  <div class="ctr"></div>

  <button id="installBtn" style="display:none;position:fixed;bottom:16px;left:16px;z-index:9999;padding:10px 14px;border:none;border-radius:10px;background:#7c3aed;color:#fff;cursor:pointer;">
    Install App
  </button>

  <script>
    let deferredPrompt = null;
    const installBtn = document.getElementById("installBtn");

    if ("serviceWorker" in navigator) {
      window.addEventListener("load", async () => {
        try {
          const reg = await navigator.serviceWorker.register("./sw.js");
          console.log("✅ SW registered:", reg.scope);
        } catch (e) {
          console.error("❌ SW registration failed:", e);
        }
      });
    }

    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.style.display = "block";
    });

    installBtn.addEventListener("click", async () => {
      if (!deferredPrompt) return;
      deferredPrompt.prompt();
      await deferredPrompt.userChoice;
      deferredPrompt = null;
      installBtn.style.display = "none";
    });

    window.addEventListener("appinstalled", () => {
      installBtn.style.display = "none";
      deferredPrompt = null;
      console.log("✅ App installed");
    });
  </script>
</body>
</html>

